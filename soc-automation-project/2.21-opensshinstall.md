# 2.21: Installing and Configuring OpenSSH
## Overview
Previously, in my Wazuh Installation walkthrough, I talked about how I ran into trouble when I tried accessing my Wazuh server through the browser. Instead of accessing my server
through the browser, I'll be installing OpenSSH onto my host computer and accessing it through the console. This file documents my journey! 

## Steps
Installing OpenSSH is pretty simple. The client OpenSSH app was already installed on my computer, and I had to install the server.

<br>
<img src="https://i.imgur.com/i8bHD8l.png">
<i>Ref 1: Installing client/server OpenSSH through Settings</i>
<br><br>

Starting and stopping the server is simple as well. We can start and stop OpenSSH by going into `Services` and OpenSSH's `Properties` tab. It's also through here that we can set OpenSSH to start 
automatically with Windows.

<br>
<img src="https://i.imgur.com/LC5tiAe.png">
<i>Ref 2: Starting and stopping OpenSSH can be done through Services</i>
<br><br>

After installing OpenSSH, we should configure some firewall rules. This can be done through a Powershell command. We can use these commands to allow port 22 access. Each command is different
depending on where sshd.exe was installed.
```powershell
New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH SSH Server' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 -Program "C:\Windows\System32\OpenSSH\sshd.exe"
New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH SSH Server' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 -Program "C:\Program Files\OpenSSH\sshd.exe"
```

Now, I will set up key-based authentication. 

<br>
<img src="https://i.imgur.com/cl1M6eB.png">
<i>Ref 3: Instructions for setting up the user-key</i>
<br><br>

I followed the instructions found [here](https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_keymanagement). After running the command `ssh-keygen -t ecdsa` and putting in a passphrase, I now have public/private key pairs.



